{% set uniqid = uniqid('vflmm_', true) %}

<div class="nested-block" id="{{ uniqid }}">
    <a href="#" class="delete-block remove"
       data-block-id="{{ uniqid }}"><i class="fa fa-times"></i></a>
    <fieldset>
        <legend>Multi Machines</legend>

        <div class="form-group col-xs-6">
            <div class="help-text">
                This is the ID used within the <code>Vagrantfile</code>. It is only used
                for your internal identification.
            </div>
            <label for="vagrantfile-vm-multi_machine-{{ uniqid }}-id">Internal Identifier</label>
            <input type="text" id="vagrantfile-vm-multi_machine-{{ uniqid }}-id"
                   name="vagrantfile[vm][multi_machine][{{ uniqid }}][id]"
                   placeholder="machine1" class="form-control"
                   value="{{ multi_machine.id }}" />
        </div>

        <div class="clearfix"></div>

        <div class="form-group col-xs-6">
            <div class="help-text">
                IP address to use for accessing the VM. This is the IP address you will
                need to enter into your <code>hosts</code> file for every virtual hosts
                you create later on.
            </div>
            <label for="vagrantfile-vm-multi_machine-{{ uniqid }}-private_network">IP Address</label>
            <input type="text" id="vagrantfile-vm-multi_machine-{{ uniqid }}-private_network"
                   name="vagrantfile[vm][multi_machine][{{ uniqid }}][private_network]"
                   placeholder="192.168.56.101" class="form-control"
                   value="{{ multi_machine.private_network }}" />
        </div>

        <div class="form-group col-xs-6">
            <div class="help-text">
                The hostname the machine should have.
                <a href="http://stackoverflow.com/a/3523068/446766"
                   target="_blank">This answer lists all valid characters.</a>
            </div>
            <label for="vagrantfile-vm-multi_machine-{{ uniqid }}-hostname">Hostname</label>
            <input type="text" id="vagrantfile-vm-multi_machine-{{ uniqid }}-hostname"
                   name="vagrantfile[vm][multi_machine][{{ uniqid }}][hostname]"
                   placeholder="machine1.puphpet" class="form-control"
                   value="{{ multi_machine.hostname }}" />
        </div>

        <div class="clearfix"></div>

        {% for forwarded_port in multi_machine.forwarded_port %}
            {% include 'PuphpetMainBundle:vagrantfile-local/sections:multi-machine-forwarded-port.html.twig' with
                {'forwarded_port': forwarded_port, 'mmId': uniqid} %}
        {% endfor %}
    </fieldset>
</div>
